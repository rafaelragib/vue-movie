(function(e){function t(t){for(var c,o,i=t[0],u=t[1],s=t[2],h=0,d=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(e[c]=u[c]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(c=!1)}c&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var c={},r={app:0},a=[];function o(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=c,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0881":function(e,t,n){"use strict";n("3e25")},"0e49":function(e,t,n){},"0e6d":function(e,t,n){},"0f5d":function(e,t,n){"use strict";n("a28e")},3073:function(e,t,n){},"3e25":function(e,t,n){},"4b91":function(e,t,n){"use strict";n("3073")},9536:function(e,t,n){"use strict";n("0e49")},a28e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r={class:"topnav"};function a(e,t,n,a,o,i){var u=Object(c["w"])("router-link"),s=Object(c["w"])("router-view");return Object(c["p"])(),Object(c["d"])("div",null,[Object(c["g"])("div",r,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(e.nav,(function(e){return Object(c["p"])(),Object(c["d"])("div",{key:e.title},[Object(c["g"])(u,{class:"anchor",to:e.path},{default:Object(c["C"])((function(){return[Object(c["f"])(Object(c["y"])(e.title),1)]})),_:2},1032,["to"])])})),128)),""!==e.watchLink?(Object(c["p"])(),Object(c["d"])("div",{key:0,class:"anchor",onClick:t[1]||(t[1]=function(){return e.refreshPage&&e.refreshPage.apply(e,arguments)})},"Log Out")):Object(c["e"])("",!0)]),Object(c["g"])(s,{onUpdateUserId:t[2]||(t[2]=function(t){return e.setwatchlink(t)})})])}var o=n("1da1"),i=(n("96cf"),n("d3b7"),{token:"",watchList:[],userId:""}),u=Object(c["h"])({name:"App",created:function(){window.addEventListener("beforeunload",this.updateWatchList)},data:function(){return{nav:[{title:"Search",path:"/"},{title:"Sign In",path:"/Signin"},{title:"Watch List",path:"/watchlist"}],watchLink:""}},methods:{updateWatchList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({watchList:i.watchList})},t.next=4,fetch(e.watchLink,n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.debug(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},setwatchlink:function(e){this.watchLink=e},refreshPage:function(){window.location.reload()}}});n("9536");u.render=a;var s=u,l=n("6c02"),h=Object(c["F"])("data-v-bb3edecc");Object(c["s"])("data-v-bb3edecc");var d={class:"searchComponent"},p=Object(c["g"])("h3",null,"Search movie via Title",-1);Object(c["q"])();var b=h((function(e,t,n,r,a,o){var i=Object(c["w"])("search-result");return Object(c["p"])(),Object(c["d"])("div",d,[p,Object(c["g"])("form",{onSubmit:t[3]||(t[3]=Object(c["E"])((function(){}),["prevent"]))},[Object(c["D"])(Object(c["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchquery=t}),placeholder:"The Dark Knight"},null,512),[[c["A"],e.searchquery]]),Object(c["g"])("button",{onClick:t[2]||(t[2]=function(){return e.searchMovie&&e.searchMovie.apply(e,arguments)}),class:"searchButton"},"Search")],32),Object(c["g"])(i,{movies:e.movies,movieResult:e.movieResult},null,8,["movies","movieResult"])])})),f=(n("99af"),n("159b"),Object(c["F"])("data-v-371f7b0e"));Object(c["s"])("data-v-371f7b0e");var v={key:0},O={key:1,class:"movieContainer"},j={key:2};Object(c["q"])();var m=f((function(e,t,n,r,a,o){return Object(c["p"])(),Object(c["d"])("div",null,["limitSearch"===e.movieResult?(Object(c["p"])(),Object(c["d"])("div",v," Too much search result. Borden your query. ")):"okay"===e.movieResult?(Object(c["p"])(),Object(c["d"])("div",O,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(e.movieList,(function(t){return Object(c["p"])(),Object(c["d"])("div",{class:"movieItem",key:t.imdbID},[Object(c["g"])("img",{src:t.Poster},null,8,["src"]),Object(c["g"])("h2",null,Object(c["y"])(t.Title),1),Object(c["g"])("p",null,Object(c["y"])(t.Year),1),Object(c["g"])("button",{onClick:function(n){return e.addToList(t)}},Object(c["y"])(e.movieMessage(t.watch)),9,["onClick"])])})),128))])):""===e.movieResult?(Object(c["p"])(),Object(c["d"])("div",j,"Input movie name to see result.")):Object(c["e"])("",!0)])})),w=(n("a434"),n("5c40")),g=Object(w["k"])({name:"SearchResult",props:{movies:Array,movieResult:String},data:function(){return{movieList:this.movies}},watch:{movies:function(e){this.movieList=e}},methods:{addToList:function(e){if(e.watch){var t=i.watchList.indexOf(e.Title);i.watchList.splice(t,1),e.watch=!1}else i.watchList.push(e.Title),e.watch=!0},movieMessage:function(e){return e?"Remove from watch List":"Add to watch List"}}});n("0881");g.render=m,g.__scopeId="data-v-371f7b0e";var y=g,k=Object(w["k"])({name:"Search",components:{SearchResult:y},data:function(){return{searchquery:"",movies:[],movieResult:""}},methods:{fetchMovie:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("https://www.omdbapi.com/?","s=").concat(e.searchquery,"&type=movie&").concat("&apikey=8c083f86"));case 3:return n=t.sent,t.abrupt("return",n.json());case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},searchMovie:function(){var e=this;this.movies=[],this.fetchMovie().then((function(t){if("False"===t.Response)return console.log("TOo much"),void(e.movieResult="limitSearch");e.movieResult="okay",e.movies=t.Search,e.movies.forEach((function(e){-1===i.watchList.indexOf(e.Title)?e.watch=!1:e.watch=!0}))}))}}});n("0f5d");k.render=b,k.__scopeId="data-v-bb3edecc";var L=k,S={class:"formContainer"},x={key:0},R=Object(c["g"])("div",null,"User Login",-1),T={key:1};function C(e,t,n,r,a,o){return Object(c["p"])(),Object(c["d"])("div",S,[e.auth?(Object(c["p"])(),Object(c["d"])("div",T,"Logged in ")):(Object(c["p"])(),Object(c["d"])("div",x,[R,Object(c["g"])("form",{onSubmit:t[4]||(t[4]=Object(c["E"])((function(){}),["prevent"]))},[Object(c["D"])(Object(c["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userName=t}),type:"text",placeholder:"example@domain.com"},null,512),[[c["A"],e.userName]]),Object(c["D"])(Object(c["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),type:"password"},null,512),[[c["A"],e.password]]),Object(c["g"])("button",{onClick:t[3]||(t[3]=function(){return e.authenticate&&e.authenticate.apply(e,arguments)})},"Click me")],32)]))])}var I=Object(w["k"])({name:"SignIn",data:function(){return{auth:!1,userName:"",password:""}},methods:{authenticate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.userName,password:e.password})},fetch("login",n).then((function(t){200===t.status?t.json().then((function(t){i.token=t.token,i.userId=t.userId,e.auth=t.auth,e.$emit("updateUserId",t.links.watchlist),e.populateWatchList(t.links.watchlist)})):alert("wrong password and user")})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},populateWatchList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return c=n.sent,n.next=6,c.json();case 6:r=n.sent,i.watchList=r,t.$router.push({path:"/watchlist"}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()}}});n("ce46");I.render=C;var P=I,M=Object(c["g"])("h3",null,"Watch List",-1),_={class:"listcontainer"};function q(e,t,n,r,a,o){return Object(c["p"])(),Object(c["d"])("div",null,[M,Object(c["g"])("div",_,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(e.val,(function(t){return Object(c["p"])(),Object(c["d"])("div",{class:"list",key:t},[Object(c["g"])("p",null,Object(c["y"])(t),1),Object(c["g"])("button",{onClick:function(n){return e.removeFromList(t)}},"x",8,["onClick"])])})),128))])])}var A=Object(w["k"])({name:"WatchList",data:function(){return{val:i.watchList,cnt:0}},methods:{removeFromList:function(e){var t=this.val.indexOf(e);this.val.splice(t,1)}},unmounted:function(){i.watchList=this.val}});n("4b91");A.render=q;var U=A,W=[{path:"/",name:"Search",component:L},{path:"/signin",name:"SignIn",component:P},{path:"/watchlist",name:"watchList",component:U,meta:{requireAuth:!0}}],N=Object(l["a"])({history:Object(l["b"])("/"),routes:W});N.beforeEach((function(e,t,n){e.meta.requireAuth?""!==i.token?n():n({name:"SignIn"}):n()}));var D=N;Object(c["c"])(s).use(D).mount("#app")},ce46:function(e,t,n){"use strict";n("0e6d")}});
//# sourceMappingURL=app.b08feb4b.js.map